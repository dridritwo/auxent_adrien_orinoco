(()=>{"use strict";function t(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,c=new Array(n);e<n;e++)c[e]=t[e];return c}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function e(t){var e=document.querySelector("#total");if(t){var c=function(t){var e=0;return null!=t&&"object"===n(t)&&Object.keys(t).forEach((function(n){e+=t[n].price*t[n].quantity})),e}(t);e.innerHTML="".concat(c," €")}else e.innerHTML=""}function c(){var t=document.querySelector("#cart-counter"),e=function(t){var e=0;return null!=t&&"object"===n(t)&&Object.keys(t).forEach((function(n){e+=t[n].quantity})),e}(o());t&&(t.innerText=e)}function o(){return JSON.parse(window.localStorage.getItem("cart"))}var r=document.querySelector("#cart-list-body"),a=o();!function n(a){if(a){for(var i=function(){var a,i,d=(a=u[l],i=2,function(t){if(Array.isArray(t))return t}(a)||function(t,n){var e=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=e){var c,o,r=[],a=!0,i=!1;try{for(e=e.call(t);!(a=(c=e.next()).done)&&(r.push(c.value),!n||r.length!==n);a=!0);}catch(t){i=!0,o=t}finally{try{a||null==e.return||e.return()}finally{if(i)throw o}}return r}}(a,i)||function(n,e){if(n){if("string"==typeof n)return t(n,e);var c=Object.prototype.toString.call(n).slice(8,-1);return"Object"===c&&n.constructor&&(c=n.constructor.name),"Map"===c||"Set"===c?Array.from(n):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?t(n,e):void 0}}(a,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=(d[0],d[1]),m=document.createElement("tr"),f=s.color.toString().replace(/\s/g,"");m.innerHTML='\n        <td class="col-sm-8 col-md-5">\n        <div class="media">\n            <a class="thumbnail pull-left mr-3" href="./article.html?articleId='.concat(s._id,'"> <img class="media-object" src="').concat(s.imageUrl,'" style="width: 72px; height: 72px;"> </a>\n            <div class="media-body overflow-hidden">\n                <h4 class="media-heading"><a href="./article.html?articleId=').concat(s._id,'">').concat(s.name,'</a></h4>\n                \n            </div>\n        </div></td>\n        \n        <td class="col-sm-1 col-md-1" style="text-align: center">\n        ').concat(s.color,'\n        </td>\n        <td class="col-sm-1 col-md-1" style="text-align: center">\n        <button id="add-one-to-cart-').concat(s._id,"-").concat(f,'" type="button" class="btn btn-danger add-button"><span>+</span></button>\n        ').concat(s.quantity,'\n        <button type="button" class="btn btn-primary add-button" id="remove-one-from-cart-').concat(s._id,"-").concat(f,'"><span>-</span></button>\n        </td>\n        <td class="col-sm-1 col-md-1 text-center"><strong>').concat(s.price,' €</strong></td>\n        <td class="col-sm-1 col-md-1 text-center"><strong>').concat(s.price*s.quantity,' €</strong></td>\n        <td class="col-sm-1 col-md-1">\n        <button type="button" id="remove-btn-').concat(s._id,"-").concat(f,'" class="btn btn-danger">\n             Remove\n        </button></td>\n    '),r.appendChild(m),document.querySelector("#remove-btn-".concat(s._id,"-").concat(f)).addEventListener("click",(function(){var t,a,i=(t="".concat(s._id,"-").concat(f),delete(a=o())[t],window.localStorage.setItem("cart",JSON.stringify(a)),c(),a);r.innerHTML="",n(i),e(i)})),document.querySelector("#add-one-to-cart-".concat(s._id,"-").concat(f)).addEventListener("click",(function(){var t=function(t){var n=o();return n[t].quantity+=1,window.localStorage.setItem("cart",JSON.stringify(n)),c(),n}("".concat(s._id,"-").concat(f));r.innerHTML="",n(t),e(t)})),document.querySelector("#remove-one-from-cart-".concat(s._id,"-").concat(f)).addEventListener("click",(function(){var t=function(t){var n=o();return n[t].quantity>1?n[t].quantity-=1:delete n[t],window.localStorage.setItem("cart",JSON.stringify(n)),c(),n}("".concat(s._id,"-").concat(f));r.innerHTML="",n(t),e(t)}))},l=0,u=Object.entries(a);l<u.length;l++)i();document.querySelector("#finaliser-achat").addEventListener("click",(function(){!function(){var t=o();console.log("cart",t)}()}))}}(a),e(a),c(),document.querySelector("#clear-cart").addEventListener("click",(function(){window.localStorage.clear(),c(),e(),r.innerHTML=""}))})();