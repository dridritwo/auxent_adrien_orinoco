(()=>{"use strict";function t(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,c=new Array(n);e<n;e++)c[e]=t[e];return c}function n(n,e){return function(t){if(Array.isArray(t))return t}(n)||function(t,n){var e=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=e){var c,r,o=[],a=!0,i=!1;try{for(e=e.call(t);!(a=(c=e.next()).done)&&(o.push(c.value),!n||o.length!==n);a=!0);}catch(t){i=!0,r=t}finally{try{a||null==e.return||e.return()}finally{if(i)throw r}}return o}}(n,e)||function(n,e){if(n){if("string"==typeof n)return t(n,e);var c=Object.prototype.toString.call(n).slice(8,-1);return"Object"===c&&n.constructor&&(c=n.constructor.name),"Map"===c||"Set"===c?Array.from(n):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?t(n,e):void 0}}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t){var e=document.querySelector("#total");if(t){for(var c=0,r=0,o=Object.entries(t);r<o.length;r++){var a=n(o[r],2),i=(a[0],a[1]);c+=i.price*i.quantity}e.innerHTML="".concat(c," €")}else e.innerHTML=""}function r(){var t=document.querySelector("#cart-counter"),n=function(t){var n=0;return null!=t&&"object"===e(t)&&Object.keys(t).forEach((function(e){n+=t[e].quantity})),n}(o());t&&(t.innerText=n)}function o(){return JSON.parse(window.localStorage.getItem("cart"))}var a=document.querySelector("#cart-list-body"),i=o();!function t(e){if(e){for(var i=function(){var e=n(d[l],2),i=(e[0],e[1]),u=document.createElement("tr"),s=i.color.toString().replace(/\s/g,"");u.innerHTML='\n        <td class="col-sm-8 col-md-5">\n        <div class="media">\n            <a class="thumbnail pull-left mr-3" href="./article.html?articleId='.concat(i._id,'"> <img class="media-object" src="').concat(i.imageUrl,'" style="width: 72px; height: 72px;"> </a>\n            <div class="media-body overflow-hidden">\n                <h4 class="media-heading"><a href="./article.html?articleId=').concat(i._id,'">').concat(i.name,'</a></h4>\n                \n            </div>\n        </div></td>\n        \n        <td class="col-sm-1 col-md-1" style="text-align: center">\n        ').concat(i.color,'\n        </td>\n        <td class="col-sm-1 col-md-1" style="text-align: center">\n        <button id="add-one-to-cart-').concat(i._id,"-").concat(s,'" type="button" class="btn btn-danger add-button"><span>+</span></button>\n        ').concat(i.quantity,'\n        <button type="button" class="btn btn-primary add-button" id="remove-one-from-cart-').concat(i._id,"-").concat(s,'"><span>-</span></button>\n        </td>\n        <td class="col-sm-1 col-md-1 text-center"><strong>').concat(i.price,' €</strong></td>\n        <td class="col-sm-1 col-md-1 text-center"><strong>').concat(i.price*i.quantity,' €</strong></td>\n        <td class="col-sm-1 col-md-1">\n        <button type="button" id="remove-btn-').concat(i._id,"-").concat(s,'" class="btn btn-danger">\n             Remove\n        </button></td>\n    '),a.appendChild(u),document.querySelector("#remove-btn-".concat(i._id,"-").concat(s)).addEventListener("click",(function(){var n,e,l=(n="".concat(i._id,"-").concat(s),delete(e=o())[n],window.localStorage.setItem("cart",JSON.stringify(e)),r(),e);a.innerHTML="",t(l),c(l)})),document.querySelector("#add-one-to-cart-".concat(i._id,"-").concat(s)).addEventListener("click",(function(){var n=function(t){var n=o();return n[t].quantity+=1,window.localStorage.setItem("cart",JSON.stringify(n)),r(),n}("".concat(i._id,"-").concat(s));a.innerHTML="",t(n),c(n)})),document.querySelector("#remove-one-from-cart-".concat(i._id,"-").concat(s)).addEventListener("click",(function(){var n=function(t){var n=o();return n[t].quantity>1?n[t].quantity-=1:delete n[t],window.localStorage.setItem("cart",JSON.stringify(n)),r(),n}("".concat(i._id,"-").concat(s));a.innerHTML="",t(n),c(n)}))},l=0,d=Object.entries(e);l<d.length;l++)i();document.querySelector("#finaliser-achat").addEventListener("click",(function(){!function(){var t=o();console.log("cart",t)}()}))}}(i),c(i),r(),document.querySelector("#clear-cart").addEventListener("click",(function(){window.localStorage.clear(),r(),c(),a.innerHTML=""}))})();